{% extends "muscu_site/base.html" %}

{% load static %}

{% block title %}Création d'une séance{% endblock %}

{% block content %}
<form class="" action="" method="post">
  {% csrf_token %}

  <div class="block1 text-align">

    <div class="title">
      <label class="title-label">
        Titre de la séance:<br>
        {{ form.session_title }}
      </label>
    </div><br>
    <div class="date">
      <label >
        Date de création:<br>
        {{ form.date }}
        {{ form.date.errors }}
      </label>
    </div>

  </div>

  <div class="block2 text-align">


    <div class="column">
      <h2><label for="ex_name">Exercice</label><br></h2>
      <div class="">
        {% for element in nb_elements %}
          <div class="answer_box">
            <input type="text" name="ex{{element}}" value=""><br>
          </div>
        {% endfor %}
      </div>
    </div>

    <div class="column">
      <h2><label for="nb_sets">Séries</label><br></h2>
      <div class="">
        {% for element in nb_elements %}
          <div class="answer_box">
            <input type="text" name="set{{element}}" value=""><br>
          </div>
        {% endfor %}
      </div>
    </div>

    <div class="column">
      <h2><label for="nb_reps">Répétitions</label><br></h2>
      <div class="">
        {% for element in nb_elements %}
          <div class="answer_box">
            <input type="text" name="rep{{element}}" value=""><br>
          </div>
        {% endfor %}
      </div>
    </div>

    <div class="column">
      <h2><label for="break_time">Temps de pause</label><br></h2>
      <div class="">
        {% for element in nb_elements %}
          <div class="answer_box">
            <input type="text" name="bk{{element}}" value=""><br>
          </div>
        {% endfor %}
      </div>
    </div>

    <div>
      <a class= "button_add" href="#">Ajouter un exercice</a>
    </div>

    <div>
      <button type="submit" name="button">Enregistrer</button>
    </div>

  </div>

</form>

<script type="text/javascript">
  let nb_row = 3;

  let buttonAdd = document.querySelector('.button_add');

  let columnList = document.querySelectorAll('.column');

  function add_row(column){
    nb_row++;

    let row = document.createElement('div');
    row.className = 'answer_box';

    let inp = document.createElement('input');
    inp.type = "text";
    if column[0]{
      int.name = 'ex' + nb_row;
    } else if column[1] {
      int.name = 'set' + nb_row;
    } else if column[2]{
      int.name = 'rep' + nb_row;
    } else if column[3]{
      int.name = 'bk' + nb_row;
    }
  }

  columnList.forEach((column) =>{
    add_row(column);
  })

</script>


{% endblock %}
